import{m as p,q as f,r as S,s as te,j as v,T as Vn,h as z,t as Fe,i as _n,n as Pn,e as Sn,o as Mn,p as Tn}from"./Start.15551df6.js";var En=ae;function ae(e,t){this.x=e,this.y=t}ae.prototype={clone:function(){return new ae(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};ae.convert=function(e){return e instanceof ae?e:Array.isArray(e)?new ae(e[0],e[1]):e};var Fn=En,kn=ue;function ue(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Dn,this,t)}function Dn(e,t,n){e==1?t.id=n.readVarint():e==2?Rn(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function Rn(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}ue.types=["Unknown","Point","LineString","Polygon"];ue.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=[],u;e.pos<t;){if(r<=0){var c=e.readVarint();n=c&7,r=c>>3}if(r--,n===1||n===2)i+=e.readSVarint(),o+=e.readSVarint(),n===1&&(u&&a.push(u),u=[]),u.push(new Fn(i,o));else if(n===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+n)}return u&&a.push(u),a};ue.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,u=-1/0,c=1/0,l=-1/0;e.pos<t;){if(r<=0){var s=e.readVarint();n=s&7,r=s>>3}if(r--,n===1||n===2)i+=e.readSVarint(),o+=e.readSVarint(),i<a&&(a=i),i>u&&(u=i),o<c&&(c=o),o>l&&(l=o);else if(n!==7)throw new Error("unknown command "+n)}return[a,c,u,l]};ue.prototype.toGeoJSON=function(e,t,n){var r=this.extent*Math.pow(2,n),i=this.extent*e,o=this.extent*t,a=this.loadGeometry(),u=ue.types[this.type],c,l;function s(y){for(var g=0;g<y.length;g++){var w=y[g],_=180-(w.y+o)*360/r;y[g]=[(w.x+i)*360/r-180,360/Math.PI*Math.atan(Math.exp(_*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(c=0;c<a.length;c++)h[c]=a[c][0];a=h,s(a);break;case 2:for(c=0;c<a.length;c++)s(a[c]);break;case 3:for(a=Cn(a),c=0;c<a.length;c++)for(l=0;l<a[c].length;l++)s(a[c][l]);break}a.length===1?a=a[0]:u="Multi"+u;var d={type:"Feature",geometry:{type:u,coordinates:a},properties:this.properties};return"id"in this&&(d.id=this.id),d};function Cn(e){var t=e.length;if(t<=1)return[e];for(var n=[],r,i,o=0;o<t;o++){var a=$n(e[o]);a!==0&&(i===void 0&&(i=a<0),i===a<0?(r&&n.push(r),r=[e[o]]):r.push(e[o]))}return r&&n.push(r),n}function $n(e){for(var t=0,n=0,r=e.length,i=r-1,o,a;n<r;i=n++)o=e[n],a=e[i],t+=(a.x-o.x)*(o.y+a.y);return t}var jn=kn,Gn=Yt;function Yt(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(An,this,t),this.length=this._features.length}function An(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(In(n))}function In(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=r===1?e.readString():r===2?e.readFloat():r===3?e.readDouble():r===4?e.readVarint64():r===5?e.readVarint():r===6?e.readSVarint():r===7?e.readBoolean():null}return t}Yt.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new jn(this._pbf,t,this.extent,this._keys,this._values)};var Bn=Gn,Ln=Xn;function Xn(e,t){this.layers=e.readFields(Yn,{},t)}function Yn(e,t,n){if(e===3){var r=new Bn(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var Wn=Ln;const je=Math.PI,Ge=2*je,Q=1e-6,Hn=Ge-Q;function Ae(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Wt(){return new Ae}Ae.prototype=Wt.prototype={constructor:Ae,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,u=n-e,c=r-t,l=o-e,s=a-t,h=l*l+s*s;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>Q)if(!(Math.abs(s*u-c*l)>Q)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var d=n-o,y=r-a,g=u*u+c*c,w=d*d+y*y,_=Math.sqrt(g),O=Math.sqrt(h),M=i*Math.tan((je-Math.acos((g+h-w)/(2*_*O)))/2),T=M/O,V=M/_;Math.abs(T-1)>Q&&(this._+="L"+(e+T*l)+","+(t+T*s)),this._+="A"+i+","+i+",0,0,"+ +(s*d>l*y)+","+(this._x1=e+V*u)+","+(this._y1=t+V*c)}},arc:function(e,t,n,r,i,o){e=+e,t=+t,n=+n,o=!!o;var a=n*Math.cos(r),u=n*Math.sin(r),c=e+a,l=t+u,s=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+l:(Math.abs(this._x1-c)>Q||Math.abs(this._y1-l)>Q)&&(this._+="L"+c+","+l),n&&(h<0&&(h=h%Ge+Ge),h>Hn?this._+="A"+n+","+n+",0,1,"+s+","+(e-a)+","+(t-u)+"A"+n+","+n+",0,1,"+s+","+(this._x1=c)+","+(this._y1=l):h>Q&&(this._+="A"+n+","+n+",0,"+ +(h>=je)+","+s+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var it={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */it.read=function(e,t,n,r,i){var o,a,u=i*8-r-1,c=(1<<u)-1,l=c>>1,s=-7,h=n?i-1:0,d=n?-1:1,y=e[t+h];for(h+=d,o=y&(1<<-s)-1,y>>=-s,s+=u;s>0;o=o*256+e[t+h],h+=d,s-=8);for(a=o&(1<<-s)-1,o>>=-s,s+=r;s>0;a=a*256+e[t+h],h+=d,s-=8);if(o===0)o=1-l;else{if(o===c)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,r),o=o-l}return(y?-1:1)*a*Math.pow(2,o-r)};it.write=function(e,t,n,r,i,o){var a,u,c,l=o*8-i-1,s=(1<<l)-1,h=s>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:o-1,g=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=s):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?t+=d/c:t+=d*Math.pow(2,1-h),t*c>=2&&(a++,c/=2),a+h>=s?(u=0,a=s):a+h>=1?(u=(t*c-1)*Math.pow(2,i),a=a+h):(u=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+y]=u&255,y+=g,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;e[n+y]=a&255,y+=g,a/=256,l-=8);e[n+y-g]|=w*128};var Nn=b,ge=it;function b(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}b.Varint=0;b.Fixed64=1;b.Bytes=2;b.Fixed32=5;var Ie=(1<<16)*(1<<16),dt=1/Ie,qn=12,Ht=typeof TextDecoder>"u"?null:new TextDecoder("utf8");b.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=r&7,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=xe(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=yt(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=xe(this.buf,this.pos)+xe(this.buf,this.pos+4)*Ie;return this.pos+=8,e},readSFixed64:function(){var e=xe(this.buf,this.pos)+yt(this.buf,this.pos+4)*Ie;return this.pos+=8,e},readFloat:function(){var e=ge.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ge.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,n,r;return r=t[this.pos++],n=r&127,r<128||(r=t[this.pos++],n|=(r&127)<<7,r<128)||(r=t[this.pos++],n|=(r&127)<<14,r<128)||(r=t[this.pos++],n|=(r&127)<<21,r<128)?n:(r=t[this.pos],n|=(r&15)<<28,zn(n,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=qn&&Ht?sr(this.buf,t,e):ur(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==b.Bytes)return e.push(this.readVarint(t));var n=H(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==b.Bytes)return e.push(this.readSVarint());var t=H(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==b.Bytes)return e.push(this.readBoolean());var t=H(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==b.Bytes)return e.push(this.readFloat());var t=H(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==b.Bytes)return e.push(this.readDouble());var t=H(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==b.Bytes)return e.push(this.readFixed32());var t=H(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==b.Bytes)return e.push(this.readSFixed32());var t=H(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==b.Bytes)return e.push(this.readFixed64());var t=H(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==b.Bytes)return e.push(this.readSFixed64());var t=H(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===b.Varint)for(;this.buf[this.pos++]>127;);else if(t===b.Bytes)this.pos=this.readVarint()+this.pos;else if(t===b.Fixed32)this.pos+=4;else if(t===b.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),re(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),re(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),re(this.buf,e&-1,this.pos),re(this.buf,Math.floor(e*dt),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),re(this.buf,e&-1,this.pos),re(this.buf,Math.floor(e*dt),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){Un(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=cr(this.buf,e,this.pos);var n=this.pos-t;n>=128&&pt(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),ge.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ge.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&pt(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,b.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Jn,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Qn,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,nr,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,er,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,tr,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,rr,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,ir,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,or,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,ar,t)},writeBytesField:function(e,t){this.writeTag(e,b.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,b.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,b.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,b.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,b.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,b.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,b.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,b.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,b.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,b.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function zn(e,t,n){var r=n.buf,i,o;if(o=r[n.pos++],i=(o&112)>>4,o<128||(o=r[n.pos++],i|=(o&127)<<3,o<128)||(o=r[n.pos++],i|=(o&127)<<10,o<128)||(o=r[n.pos++],i|=(o&127)<<17,o<128)||(o=r[n.pos++],i|=(o&127)<<24,o<128)||(o=r[n.pos++],i|=(o&1)<<31,o<128))return ne(e,i,t);throw new Error("Expected varint not more than 10 bytes")}function H(e){return e.type===b.Bytes?e.readVarint()+e.pos:e.pos+1}function ne(e,t,n){return n?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function Un(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),n^4294967295?n=n+1|0:(n=0,r=r+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),Zn(n,r,t),Kn(r,t)}function Zn(e,t,n){n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos]=e&127}function Kn(e,t){var n=(e&7)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function pt(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Jn(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Qn(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function er(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function tr(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function nr(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function rr(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function ir(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function or(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function ar(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function xe(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function re(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function yt(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function ur(e,t,n){for(var r="",i=t;i<n;){var o=e[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u>n)break;var c,l,s;u===1?o<128&&(a=o):u===2?(c=e[i+1],(c&192)===128&&(a=(o&31)<<6|c&63,a<=127&&(a=null))):u===3?(c=e[i+1],l=e[i+2],(c&192)===128&&(l&192)===128&&(a=(o&15)<<12|(c&63)<<6|l&63,(a<=2047||a>=55296&&a<=57343)&&(a=null))):u===4&&(c=e[i+1],l=e[i+2],s=e[i+3],(c&192)===128&&(l&192)===128&&(s&192)===128&&(a=(o&15)<<18|(c&63)<<12|(l&63)<<6|s&63,(a<=65535||a>=1114112)&&(a=null))),a===null?(a=65533,u=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),r+=String.fromCharCode(a),i+=u}return r}function sr(e,t,n){return Ht.decode(e.subarray(t,n))}function cr(e,t,n){for(var r=0,i,o;r<t.length;r++){if(i=t.charCodeAt(r),i>55295&&i<57344)if(o)if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||r+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):o=i;continue}else o&&(e[n++]=239,e[n++]=191,e[n++]=189,o=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=i&63|128)}return n}function Nt(e,t){return Array.isArray(t)?[e.a*t[0]+e.c*t[1]+e.e,e.b*t[0]+e.d*t[1]+e.f]:{x:e.a*t.x+e.c*t.y+e.e,y:e.b*t.x+e.d*t.y+e.f}}function qt(e,t){return t.map(n=>Nt(e,n))}function pe(e){return{a:parseFloat(e.a),b:parseFloat(e.b),c:parseFloat(e.c),d:parseFloat(e.d),e:parseFloat(e.e),f:parseFloat(e.f)}}function zt(){return{a:1,c:0,e:0,b:0,d:1,f:0}}function Ut(e){const{a:t,b:n,c:r,d:i,e:o,f:a}=e,u=t*i-n*r;return{a:i/u,b:n/-u,c:r/-u,d:t/u,e:(i*o-r*a)/-u,f:(n*o-t*a)/u}}function Ce(e){return typeof e>"u"}function F(e,t=0){return{a:1,c:0,e,b:0,d:1,f:t}}function N(...e){e=Array.isArray(e[0])?e[0]:e;const t=(n,r)=>({a:n.a*r.a+n.c*r.b,c:n.a*r.c+n.c*r.d,e:n.a*r.e+n.c*r.f+n.e,b:n.b*r.a+n.d*r.b,d:n.b*r.c+n.d*r.d,f:n.b*r.e+n.d*r.f+n.f});switch(e.length){case 0:throw new Error("no matrices provided");case 1:return e[0];case 2:return t(e[0],e[1]);default:{const[n,r,...i]=e,o=t(n,r);return N(o,...i)}}}function ee(e,t=void 0,n=void 0,r=void 0){Ce(t)&&(t=e);const i={a:e,c:0,e:0,b:0,d:t,f:0};return Ce(n)||Ce(r)?i:N([F(n,r),i,F(-n,-r)])}function lr(e){return fr(e)}function fr(e){return`matrix(${e.a},${e.b},${e.c},${e.d},${e.e},${e.f})`}function hr(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function ke(e,t,n,r){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,ke.prototype),i.expected=t,i.found=n,i.location=r,i.name="SyntaxError",i}hr(ke,Error);function $e(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}ke.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,o=this.location.source+":"+i.line+":"+i.column;if(n){var a=this.location.end,u=$e("",i.line.toString().length," "),c=n[i.line-1],l=i.line===a.line?a.column:c.length+1,s=l-i.column||1;t+=`
 --> `+o+`
`+u+` |
`+i.line+" | "+c+`
`+u+" | "+$e("",i.column-1," ")+$e("",s,"^")}else t+=`
 at `+o}return t};ke.buildMessage=function(e,t){var n={literal:function(l){return'"'+i(l.text)+'"'},class:function(l){var s=l.parts.map(function(h){return Array.isArray(h)?o(h[0])+"-"+o(h[1]):o(h)});return"["+(l.inverted?"^":"")+s.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(l){return l.description}};function r(l){return l.charCodeAt(0).toString(16).toUpperCase()}function i(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(s){return"\\x0"+r(s)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(s){return"\\x"+r(s)})}function o(l){return l.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(s){return"\\x0"+r(s)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(s){return"\\x"+r(s)})}function a(l){return n[l.type](l)}function u(l){var s=l.map(a),h,d;if(s.sort(),s.length>0){for(h=1,d=1;h<s.length;h++)s[h-1]!==s[h]&&(s[d]=s[h],d++);s.length=d}switch(s.length){case 1:return s[0];case 2:return s[0]+" or "+s[1];default:return s.slice(0,-1).join(", ")+", or "+s[s.length-1]}}function c(l){return l?'"'+i(l)+'"':"end of input"}return"Expected "+u(e)+" but "+c(t)+" found."};var k="idle",G="panning",A="zooming",j="auto",U="none",L="pan",q="zoom-in",Z="zoom-out",be="none",I="top",D="right",B="bottom",E="left",De="zoom",ye="pan",se="center",ce="left",ot="right",le="top",at="bottom",gt="cover";function Be(e){return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(e)}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xt(Object(n),!0).forEach(function(r){dr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zt=3,Kt=k;function vt(e,t,n,r,i,o){var a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null;return P({},Oe(Oe({},zt()),{},{version:Zt,mode:Kt,focus:!1,pinchPointDistance:null,prePinchMode:null,viewerWidth:e,viewerHeight:t,SVGMinX:n,SVGMinY:r,SVGWidth:i,SVGHeight:o,scaleFactorMin:a,scaleFactorMax:u,startX:null,startY:null,endX:null,endY:null,miniatureOpen:!0,lastAction:null}))}function P(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return e=Object.assign({},e,t,{lastAction:n}),Object.freeze(e)}function pr(e){return e!==null&&Be(e)==="object"&&e.hasOwnProperty("version")&&e.version===Zt}function C(e,t,n){var r=pe(e),i=Ut(r);return Nt(i,{x:t,y:n})}function we(e){var t=pe(e);return{scaleFactor:t.a,translationX:t.e,translationY:t.f}}function yr(e,t){return P(e,{focus:t})}function gr(e,t,n){return P(e,{viewerWidth:t,viewerHeight:n})}function mt(e,t,n,r,i){return P(e,{SVGMinX:t,SVGMinY:n,SVGWidth:r,SVGHeight:i})}function xr(e,t,n){return P(e,{scaleFactorMin:t,scaleFactorMax:n})}function vr(e,t,n,r){var i=e.viewerWidth,o=e.viewerHeight,a=N(F(-t+i/2,-n+o/2),F(t,n),ee(r,r),F(-t,-n));return P(e,Oe({mode:k},a))}function mr(e){return P(e,Oe({mode:k},zt()))}function Jt(e){return P(e,{mode:Kt,startX:null,startY:null,endX:null,endY:null})}function wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Qt=function(){function e(t,n,r){wr(this,e),this.originalEvent=t,this.value=n,this.SVGViewer=r}return br(e,[{key:"scaleFactor",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||we(this.value),this._cacheDecomposedValue.scaleFactor}},{key:"translationX",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||we(this.value),this._cacheDecomposedValue.translationX}},{key:"translationY",get:function(){return this._cacheDecomposedValue=this._cacheDecomposedValue||we(this.value),this._cacheDecomposedValue.translationY}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}}]),e}();function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bt(Object(n),!0).forEach(function(r){Vr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _r(e,t){return Tr(e)||Mr(e,t)||Sr(e,t)||Pr()}function Pr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sr(e,t){if(!!e){if(typeof e=="string")return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(e,t)}}function Ot(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mr(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,u;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(c){o=!0,u=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw u}}return r}}function Tr(e){if(Array.isArray(e))return e}function ut(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0,i=N(pe(e),F(t,n));if(r){var o=qt(i,[{x:e.SVGMinX+r,y:e.SVGMinY+r},{x:e.SVGMinX+e.SVGWidth-r,y:e.SVGMinY+e.SVGHeight-r}]),a=_r(o,2),u=a[0],c=u.x,l=u.y,s=a[1],h=s.x,d=s.y,y=0;e.viewerWidth-c<0?y=e.viewerWidth-c:h<0&&(y=-h);var g=0;e.viewerHeight-l<0?g=e.viewerHeight-l:d<0&&(g=-d),i=N(F(y,g),i)}return P(e,Or({mode:k},i),ye)}function Er(e,t,n){return P(e,{mode:G,startX:t,startY:n,endX:t,endY:n},ye)}function Fr(e,t,n,r){if(e.mode!==G)throw new Error("update pan not allowed in this mode "+e.mode);var i=e.endX,o=e.endY,a=C(e,i,o),u=C(e,t,n),c=u.x-a.x,l=u.y-a.y,s=ut(e,c,l,r);return P(s,{mode:G,endX:t,endY:n},ye)}function en(e){return P(e,{mode:k,startX:null,startY:null,endX:null,endY:null},ye)}function kr(e,t,n){var r=0,i=0;return n<=20&&(i=2),e.viewerWidth-t<=20&&(r=-2),e.viewerHeight-n<=20&&(i=-2),t<=20&&(r=2),r=r/e.d,i=i/e.d,r===0&&i===0?e:ut(e,r,i)}function tn(e,t){if(e.x<=t.x&&e.y<=t.y)return{x:e.x,y:e.y,width:t.x-e.x,height:t.y-e.y};if(e.x>=t.x&&e.y<=t.y)return{x:t.x,y:e.y,width:e.x-t.x,height:t.y-e.y};if(e.x>=t.x&&e.y>=t.y)return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y};if(e.x<=t.x&&e.y>=t.y)return{x:e.x,y:t.y,width:t.x-e.x,height:e.y-t.y}}function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vt(Object(n),!0).forEach(function(r){Dr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){var n=we(e),r=n.scaleFactor,i=e.scaleFactorMin&&r*t<e.scaleFactorMin,o=e.scaleFactorMax&&r*t>e.scaleFactorMax;return i&&t<1||o&&t>1}function st(e,t){var n=t.a;return e.scaleFactorMin!=null&&(n=Math.max(n,e.scaleFactorMin)),e.scaleFactorMax!=null&&(n=Math.min(n,e.scaleFactorMax)),P(t,{a:n,d:n})}function he(e,t,n,r){if(Re(e,r))return e;var i=N(pe(e),F(t,n),ee(r,r),F(-t,-n));return P(e,fe(fe({mode:k},i),{},{startX:null,startY:null,endX:null,endY:null}),De)}function nn(e,t,n,r,i){var o=e.viewerWidth,a=e.viewerHeight,u=o/r,c=a/i,l=Math.min(u,c),s=N(ee(l,l),F(-t,-n));return Re(e,l/e.d)?P(e,{mode:k,startX:null,startY:null,endX:null,endY:null}):P(e,fe(fe({mode:k},st(e,s)),{},{startX:null,startY:null,endX:null,endY:null}),De)}function rn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ce,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le,r=e.viewerWidth,i=e.viewerHeight,o=e.SVGMinX,a=e.SVGMinY,u=e.SVGWidth,c=e.SVGHeight,l=r/u,s=i/c,h=Math.min(l,s),d=ee(h,h),y=-o*l,g=-a*s;if(l<s){var w=i-l*c;switch(n){case le:g=-a*h;break;case se:g=Math.round(w/2)-a*h;break;case at:g=w-a*h;break;case gt:d=ee(s,s);var _=r-s*u;y=o+Math.round(_/2);break}}else{var O=r-s*u;switch(t){case ce:y=-o*h;break;case se:y=Math.round(O/2)-o*h;break;case ot:y=O-o*h;break;case gt:d=ee(l,l);var M=i-l*c;g=a+Math.round(M/2);break}}var T=F(y,g),V=N(T,d);return Re(e,h/e.d)?P(e,{mode:k,startX:null,startY:null,endX:null,endY:null}):P(e,fe(fe({mode:k},st(e,V)),{},{startX:null,startY:null,endX:null,endY:null}),De)}function Rr(e,t){var n=e.viewerWidth,r=e.viewerHeight,i=C(e,n/2,r/2);return he(e,i.x,i.y,t)}function Cr(e,t,n){return P(e,{mode:A,startX:t,startY:n,endX:t,endY:n})}function $r(e,t,n){if(e.mode!==A)throw new Error("update selection not allowed in this mode "+e.mode);return P(e,{endX:t,endY:n})}function Le(e,t,n,r){var i=7,o=e.startX,a=e.startY,u=C(e,o,a),c=C(e,t,n);if(Math.abs(o-t)>i&&Math.abs(a-n)>i){var l=tn(u,c);return nn(e,l.x,l.y,l.width,l.height)}else{var s=C(e,t,n);return he(e,s.x,s.y,r)}}function jr(e,t,n,r,i){return r+(i-r)*(e-t)/(n-t)}function de(e,t){var n=t.getBoundingClientRect(),r=n.left,i=n.top,o=e.clientX-Math.round(r),a=e.clientY-Math.round(i);return{x:o,y:a}}function on(e,t,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,a=o||de(e,t),u=a.x,c=a.y,l=r;switch(n){case Z:var s=C(r,u,c);l=he(r,s.x,s.y,1/i.scaleFactor);break;case q:l=Cr(r,u,c);break;case j:case L:l=Er(r,u,c);break;default:return r}return e.preventDefault(),l}function an(e,t,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,a=o||de(e,t),u=a.x,c=a.y,l=e.buttons===0,s=r;switch(n){case q:r.mode===A&&(s=l?Le(r,u,c,i.scaleFactor):$r(r,u,c));break;case j:case L:r.mode===G&&(s=l?en(r):Fr(r,u,c,i.preventPanOutside?20:void 0));break;default:return r}return e.preventDefault(),s}function un(e,t,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,a=o||de(e,t),u=a.x,c=a.y,l=r;switch(n){case Z:r.mode===A&&(l=Le(r,u,c,1/i.scaleFactor));break;case q:r.mode===A&&(l=Le(r,u,c,i.scaleFactor));break;case j:case L:r.mode===G&&(l=en(r));break;default:return r}return e.preventDefault(),l}function Gr(e,t,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,a=o||de(e,t),u=a.x,c=a.y,l=r;if(n===j&&!i.disableDoubleClickZoomWithToolAuto){var s=i.modifierKeys,h=s===void 0?[]:s,d=C(r,u,c),y=function(O,M){return O||e.getModifierState(M)},g=h.reduce(y,!1),w=g?1/i.scaleFactor:i.scaleFactor;l=he(r,d.x,d.y,w)}return e.preventDefault(),l}function Ar(e,t,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,a=o||de(e,t),u=a.x,c=a.y;if(!i.detectWheel)return r;var l=Math.max(-1,Math.min(1,e.deltaY)),s=jr(l,-1,1,i.scaleFactorOnWheel,1/i.scaleFactorOnWheel),h=C(r,u,c),d=he(r,h.x,h.y,s);return e.preventDefault(),d}function _t(e,t,n,r,i){var o=yr(r,e.type==="mouseenter");return e.preventDefault(),o}function Ir(e,t,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,a=o.x,u=o.y;return!([U,j].indexOf(n)>=0)||!i.detectAutoPan||!r.focus?r:kr(r,a,u)}function Xe(e){return Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(e)}function Br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lr(e,t,n){return t&&Pt(e.prototype,t),n&&Pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}function Ye(e,t){return Ye=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ye(e,t)}function Yr(e){var t=Nr();return function(){var r=Ve(e),i;if(t){var o=Ve(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Wr(this,i)}}function Wr(e,t){if(t&&(Xe(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hr(e)}function Hr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ve(e)}var qr=function(e){Xr(n,e);var t=Yr(n);function n(){return Br(this,n),t.apply(this,arguments)}return Lr(n,[{key:"point",get:function(){if(!this._cachePoint){var i=this.originalEvent,o=this.SVGViewer,a=this.value,u=de(i,o);this._cachePoint=C(a,u.x,u.y)}return this._cachePoint}},{key:"x",get:function(){return this.point.x}},{key:"y",get:function(){return this.point.y}}]),n}(Qt);function We(e){return We=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(e)}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?St(Object(n),!0).forEach(function(r){zr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ur(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zr(e,t,n){return t&&Tt(e.prototype,t),n&&Tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}function He(e,t){return He=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},He(e,t)}function Jr(e){var t=ti();return function(){var r=_e(e),i;if(t){var o=_e(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Qr(this,i)}}function Qr(e,t){if(t&&(We(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ei(e)}function ei(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ti(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_e(e)}var ni=function(e){Kr(n,e);var t=Jr(n);function n(){return Ur(this,n),t.apply(this,arguments)}return Zr(n,[{key:"points",get:function(){return this._cachePoints||(this._cachePoints=n.touchesToPoints(this.originalEvent.touches,this.SVGViewer,this.value)),this._cachePoints}},{key:"changedPoints",get:function(){return this._cacheChangedPoints||(this._cacheChangedPoints=n.touchesToPoints(this.originalEvent.changedTouches,this.SVGViewer,this.value)),this._cacheChangedPoints}}],[{key:"touchesToPoints",value:function(i,o,a){for(var u=[],c=0;c<i.length;c++){var l=i[c],s=o.getBoundingClientRect(),h=l.clientX-Math.round(s.left),d=l.clientY-Math.round(s.top),y=C(a,h,d);u.push(Mt(Mt({},y),{},{identifier:l.identifier}))}return u}}]),n}(Qt);function ri(e,t,n){var r=e.type;switch(r){case"mousemove":case"mouseup":case"mousedown":case"click":case"dblclick":return new qr(e,t,n);case"touchstart":case"touchmove":case"touchend":case"touchcancel":return new ni(e,t,n);default:throw new Error("".concat(r," not supported"))}}function Et(e){return e.split(/[ ,]/).filter(Boolean).map(Number)}function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ft(Object(n),!0).forEach(function(r){ii(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ii(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oi(e,t){var n=t.getBoundingClientRect(),r=n.left,i=n.top,o=e.clientX-Math.round(r),a=e.clientY-Math.round(i);return{x:o,y:a}}function ai(e,t,n,r,i){if(cn(e,i))return ln(e,t,n,r);if(e.touches.length!==1){if([G,A].indexOf(r.mode)>=0)return Jt(r);if([k].indexOf(r.mode)>=0)return r}return ct(e,t,n,r,i,on)}function ui(e,t,n,r,i){return cn(e,i)?ln(e,t,n,r):[G,A].indexOf(r.mode)>=0?ct(e,t,n,r,i,an):r}function si(e,t,n,r,i){if(!([G,A].indexOf(r.mode)>=0))return r;var o=li(e,r,i)?P(r,{pinchPointDistance:null}):r;return e.touches.length>0?o:ct(e,t,n,o,i,un)}function ci(e,t,n,r,i){return e.stopPropagation(),e.preventDefault(),Jt(r)}function sn(e){return typeof e.pinchPointDistance=="number"}function li(e,t,n){return n.detectPinchGesture&&sn(t)&&e.touches.length<2}function cn(e,t){return t.detectPinchGesture&&e.touches.length>1}function ct(e,t,n,r,i,o){var a=e.touches.length===0?P(r,{mode:r.prePinchMode?k:r.mode,prePinchMode:null}):r,u=e.touches.length>0?e.touches[0]:e.changedTouches[0],c=oi(u,t);switch(n){case Z:case q:case j:case L:return e.stopPropagation(),e.preventDefault(),o(e,t,n,a,i,c);default:return a}}function ln(e,t,n,r,i){var o=t.getBoundingClientRect(),a=o.left,u=o.top,c=e.touches[0].clientX-Math.round(a),l=e.touches[0].clientY-Math.round(u),s=e.touches[1].clientX-Math.round(a),h=e.touches[1].clientY-Math.round(u),d=Math.sqrt(Math.pow(s-c,2)+Math.pow(h-l,2)),y=sn(r)?r.pinchPointDistance:d,g=C(r,(c+s)/2,(l+h)/2),w=d/y;if(Re(r,w))return r;e.cancelable&&e.preventDefault();var _=N(pe(r),F(g.x,g.y),ee(w,w),F(-g.x,-g.y));return P(r,P(kt(kt({mode:A},st(r,_)),{},{startX:null,startY:null,endX:null,endY:null,prePinchMode:r.prePinchMode?r.prePinchMode:r.mode,pinchPointDistance:d})))}function fn(e){return P(e,{miniatureOpen:!0})}function hn(e){return P(e,{miniatureOpen:!1})}var fi=function(t){return["zoom-in","zoom-out","grab","grabbing"].indexOf(t)>-1},dn=function(){return navigator.userAgent.toLowerCase()},hi=function(){return dn().indexOf("firefox")>-1},di=function(){return dn().indexOf("webkit")>-1};function ve(e){if(!fi(e))return e;if(hi())return"-moz-".concat(e);if(di())return"-webkit-".concat(e)}function pi(e){return e.displayName||e.name||"Component"}function Ne(e){return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(e)}function qe(){return qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}function yi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gi(e,t,n){return t&&Dt(e.prototype,t),n&&Dt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}function ze(e,t){return ze=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},ze(e,t)}function vi(e){var t=bi();return function(){var r=Pe(e),i;if(t){var o=Pe(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return mi(this,i)}}function mi(e,t){if(t&&(Ne(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wi(e)}function wi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pe(e){return Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Pe(e)}var Oi=1,Vi=function(){return"uid".concat(Oi++)};function pn(e){var t=function(n){xi(i,n);var r=vi(i);function i(o){var a;return yi(this,i),a=r.call(this,o),a.state={uid:Vi()},a}return gi(i,[{key:"render",value:function(){return p.createElement(e,qe({_uid:this.state.uid},this.props))}}]),i}(p.Component);return t.displayName="RandomUID(".concat(pi(e),")"),t}var Rt="react-svg-pan-zoom_border_gradient";function yn(e){var t=e.direction,n=e.width,r=e.height,i=e._uid,o;switch(t){case I:o="translate(".concat(n,", 0) rotate(90)");break;case D:o="translate(".concat(n,", ").concat(r,") rotate(180)");break;case B:o="translate(0, ".concat(r,") rotate(270)");break;case E:default:o=" ";break}var a="".concat(Rt,"_gradient_").concat(i),u="".concat(Rt,"_mask_").concat(i);return p.createElement("g",null,p.createElement("defs",null,p.createElement("linearGradient",{id:a,x1:"0%",y1:"0%",x2:"100%",y2:"0%",spreadMethod:"pad"},p.createElement("stop",{offset:"0%",stopColor:"#fff",stopOpacity:"0.8"}),p.createElement("stop",{offset:"100%",stopColor:"#000",stopOpacity:"0.5"})),p.createElement("mask",{id:u,x:"0",y:"0",width:"20",height:Math.max(n,r)},p.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(n,r),style:{stroke:"none",fill:"url(#".concat(a,")")}}))),p.createElement("rect",{x:"0",y:"0",width:"20",height:Math.max(n,r),style:{stroke:"none",fill:"#000",mask:"url(#".concat(u,")")},transform:o}))}yn.propTypes={direction:f.exports.oneOf([I,D,B,E]).isRequired,width:f.exports.number.isRequired,height:f.exports.number.isRequired};const me=pn(yn);function gn(e){var t=e.startX,n=e.startY,r=e.endX,i=e.endY;if(!t||!n||!r||!i)return null;var o=tn({x:t,y:n},{x:r,y:i});return p.createElement("rect",{stroke:"#969FFF",strokeOpacity:.7,fill:"#F3F4FF",fillOpacity:.7,x:o.x,y:o.y,width:o.width,height:o.height,style:{pointerEvents:"none"}})}gn.propTypes={startX:f.exports.number,startY:f.exports.number,endX:f.exports.number,endY:f.exports.number};function _i(){return p.createElement("svg",{width:24,height:24,stroke:"currentColor"},p.createElement("path",{d:"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"}))}function Pi(){return p.createElement("svg",{width:24,height:24,stroke:"currentColor"},p.createElement("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"}))}function Si(){return p.createElement("svg",{width:24,height:24,stroke:"currentColor"},p.createElement("g",null,p.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),p.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}function Mi(){return p.createElement("svg",{width:24,height:24,stroke:"currentColor"},p.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}))}function Ti(){return p.createElement("svg",{width:24,height:24,stroke:"currentColor"},p.createElement("path",{d:"M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"}))}function Ue(e){return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(e)}function Ei(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fi(e,t,n){return t&&Ct(e.prototype,t),n&&Ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ki(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}function Ze(e,t){return Ze=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ze(e,t)}function Di(e){var t=$i();return function(){var r=Se(e),i;if(t){var o=Se(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Ri(this,i)}}function Ri(e,t){if(t&&(Ue(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ci(e)}function Ci(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $i(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Se(e)}var oe=function(e){ki(n,e);var t=Di(n);function n(r){var i;return Ei(this,n),i=t.call(this,r),i.state={hover:!1},i}return Fi(n,[{key:"change",value:function(i){switch(i.preventDefault(),i.stopPropagation(),i.type){case"mouseenter":case"touchstart":this.setState({hover:!0});break;case"mouseleave":case"touchend":case"touchcancel":this.setState({hover:!1});break}}},{key:"render",value:function(){var i=this,o={display:"block",width:"24px",height:"24px",margin:[I,B].indexOf(this.props.toolbarPosition)>=0?"2px 1px":"1px 2px",color:this.props.active||this.state.hover?this.props.activeColor:"#FFF",transition:"color 200ms ease",background:"none",padding:"0px",border:"0px",outline:"0px",cursor:"pointer"};return p.createElement("button",{onMouseEnter:function(u){return i.change(u)},onMouseLeave:function(u){return i.change(u)},onTouchStart:function(u){i.change(u),i.props.onClick(u)},onTouchEnd:function(u){return i.change(u)},onTouchCancel:function(u){return i.change(u)},onClick:this.props.onClick,style:o,title:this.props.title,name:this.props.name,type:"button"},this.props.children)}}]),n}(p.Component);oe.propTypes={title:f.exports.string.isRequired,name:f.exports.string.isRequired,toolbarPosition:f.exports.string.isRequired,activeColor:f.exports.string.isRequired,onClick:f.exports.func.isRequired,active:f.exports.bool.isRequired};function lt(e){var t=e.tool,n=e.value,r=e.onChangeValue,i=e.onChangeTool,o=e.activeToolColor,a=e.position,u=e.SVGAlignX,c=e.SVGAlignY,l=function(g,w){i(w),g.stopPropagation(),g.preventDefault()},s=function(g){r(rn(n,u,c)),g.stopPropagation(),g.preventDefault()},h=[I,B].indexOf(a)>=0,d={position:"absolute",transform:[I,B].indexOf(a)>=0?"translate(-50%, 0px)":"none",top:[E,D,I].indexOf(a)>=0?"5px":"unset",left:[I,B].indexOf(a)>=0?"50%":E===a?"5px":"unset",right:[D].indexOf(a)>=0?"5px":"unset",bottom:[B].indexOf(a)>=0?"5px":"unset",backgroundColor:"rgba(19, 20, 22, 0.90)",borderRadius:"2px",display:"flex",flexDirection:h?"row":"column",padding:h?"1px 2px":"2px 1px"};return p.createElement("div",{style:d,role:"toolbar"},p.createElement(oe,{toolbarPosition:a,active:t===U,activeColor:o,name:"unselect-tools",title:"Selection",onClick:function(g){return l(g,U)}},p.createElement(_i,null)),p.createElement(oe,{toolbarPosition:a,active:t===L,activeColor:o,name:"select-tool-pan",title:"Pan",onClick:function(g){return l(g,L)}},p.createElement(Pi,null)),p.createElement(oe,{toolbarPosition:a,active:t===q,activeColor:o,name:"select-tool-zoom-in",title:"Zoom in",onClick:function(g){return l(g,q)}},p.createElement(Si,null)),p.createElement(oe,{toolbarPosition:a,active:t===Z,activeColor:o,name:"select-tool-zoom-out",title:"Zoom out",onClick:function(g){return l(g,Z)}},p.createElement(Mi,null)),p.createElement(oe,{toolbarPosition:a,active:!1,activeColor:o,name:"fit-to-viewer",title:"Fit to viewer",onClick:function(g){return s(g)}},p.createElement(Ti,null)))}lt.propTypes={tool:f.exports.string.isRequired,onChangeTool:f.exports.func.isRequired,value:f.exports.object.isRequired,onChangeValue:f.exports.func.isRequired,position:f.exports.oneOf([I,D,B,E]),SVGAlignX:f.exports.oneOf([se,ce,ot]),SVGAlignY:f.exports.oneOf([se,le,at]),activeToolColor:f.exports.string};lt.defaultProps={position:D,SVGAlignX:ce,SVGAlignY:le,activeToolColor:"#1CA6FC"};function ji(){return"ontouchstart"in window||navigator.maxTouchPoints}function xn(e){var t=e.open,n=e.position,r=0;switch(n){case E:r=t?"rotate(225, 12, 13)":"rotate(45, 12, 13)";break;case D:r=r=t?"rotate(135, 12, 13)":"rotate(-45, 12, 13)";break}return p.createElement("svg",{width:24,height:24,stroke:"currentColor"},p.createElement("g",{transform:r},p.createElement("path",{fill:"#000000",d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"})))}xn.propTypes={open:f.exports.bool.isRequired,position:f.exports.oneOf([D,E]).isRequired};function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vn(e){var t,n=e.value,r=e.onChangeValue,i=e.position,o=(t={width:"24px",height:"24px",display:"block",position:"absolute",bottom:0},ie(t,i===E?"left":"right","0px"),ie(t,"background","rgba(19, 20, 22, 0.901961)"),ie(t,"border",0),ie(t,"padding",0),ie(t,"outline",0),ie(t,"color","#fff"),t),a=n.miniatureOpen?hn:fn;return p.createElement("button",{type:"button",style:o,onClick:function(){return r(a(n))}},p.createElement(xn,{open:n.miniatureOpen,position:i}))}vn.propTypes={value:f.exports.object.isRequired,onChangeValue:f.exports.func.isRequired,position:f.exports.oneOf([D,E]).isRequired};var Gi="react-svg-pan-zoom_miniature";function mn(e){var t=e.SVGMinX,n=e.SVGMinY,r=e.SVGWidth,i=e.SVGHeight,o=e.x1,a=e.y1,u=e.x2,c=e.y2;e.zoomToFit;var l=e._uid,s="".concat(Gi,"_mask_").concat(l);return p.createElement("g",null,p.createElement("defs",null,p.createElement("mask",{id:s},p.createElement("rect",{x:t,y:n,width:r,height:i,fill:"#ffffff"}),p.createElement("rect",{x:o,y:a,width:u-o,height:c-a}))),p.createElement("rect",{x:t,y:n,width:r,height:i,style:{stroke:"none",fill:"#000",mask:"url(#".concat(s,")"),opacity:.4}}))}mn.propTypes={SVGWidth:f.exports.number.isRequired,SVGHeight:f.exports.number.isRequired,SVGMinX:f.exports.number.isRequired,SVGMinY:f.exports.number.isRequired,x1:f.exports.number.isRequired,y1:f.exports.number.isRequired,x2:f.exports.number.isRequired,y2:f.exports.number.isRequired,zoomToFit:f.exports.number.isRequired};const Ai=pn(mn);function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ii(e,t){return Yi(e)||Xi(e,t)||Li(e,t)||Bi()}function Bi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Li(e,t){if(!!e){if(typeof e=="string")return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(e,t)}}function jt(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xi(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,u;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(c){o=!0,u=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw u}}return r}}function Yi(e){if(Array.isArray(e))return e}function ft(e){var t,n=e.value,r=e.onChangeValue,i=e.children,o=e.position,a=e.background,u=e.SVGBackground,c=e.width,l=e.height,s=n.SVGMinX,h=n.SVGMinY,d=n.SVGWidth,y=n.SVGHeight,g=n.viewerWidth,w=n.viewerHeight,_=y/d,O=_>=1?l/y:c/d,M=qt(Ut(n),[{x:0,y:0},{x:g,y:w}]),T=Ii(M,2),V=T[0],x=V.x,m=V.y,K=T[1],J=K.x,$=K.y,R,X;n.miniatureOpen?(R=c,X=l):(R=24,X=24);var Y=(t={position:"absolute",overflow:"hidden",outline:"1px solid rgba(19, 20, 22, 0.90)",transition:"width 200ms ease, height 200ms ease, bottom 200ms ease",width:R+"px",height:X+"px",bottom:"6px"},$t(t,o===E?"left":"right","6px"),$t(t,"background",a),t),W=_>=1?"translate(".concat((c-d*O)/2-s*O,", ").concat(-h*O,")"):"translate(".concat(-s*O,", ").concat((l-y*O)/2-h*O,")");return p.createElement("div",{role:"navigation",style:Y},p.createElement("svg",{width:c,height:l,style:{pointerEvents:"none"}},p.createElement("g",{transform:W},p.createElement("g",{transform:"scale(".concat(O,", ").concat(O,")")},p.createElement("rect",{fill:u,x:s,y:h,width:d,height:y}),i,p.createElement(Ai,{SVGWidth:d,SVGHeight:y,SVGMinX:s,SVGMinY:h,x1:x,y1:m,x2:J,y2:$,zoomToFit:O})))),p.createElement(vn,{value:n,onChangeValue:r,position:o}))}ft.propTypes={value:f.exports.object.isRequired,onChangeValue:f.exports.func.isRequired,SVGBackground:f.exports.string.isRequired,position:f.exports.oneOf([D,E]),background:f.exports.string.isRequired,width:f.exports.number.isRequired,height:f.exports.number.isRequired};ft.defaultProps={position:E,background:"#616264",width:100,height:80};function Ke(e){return Ke=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ke(e)}function Me(){return Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Me.apply(this,arguments)}function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gt(Object(n),!0).forEach(function(r){Hi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e,t){return Ui(e)||zi(e,t)||qi(e,t)||Ni()}function Ni(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qi(e,t){if(!!e){if(typeof e=="string")return It(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return It(e,t)}}function It(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zi(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,u;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));i=!0);}catch(c){o=!0,u=c}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw u}}return r}}function Ui(e){if(Array.isArray(e))return e}function Zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ki(e,t,n){return t&&Bt(e.prototype,t),n&&Bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ji(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}function Je(e,t){return Je=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Je(e,t)}function Qi(e){var t=to();return function(){var r=Te(e),i;if(t){var o=Te(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return eo(this,i)}}function eo(e,t){if(t&&(Ke(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qe(e)}function Qe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function to(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Te(e)}var ht=function(e){Ji(n,e);var t=Qi(n);function n(r,i){var o;Zi(this,n);var a=r.width,u=r.height,c=r.scaleFactorMin,l=r.scaleFactorMax,s=r.children,h=s.props.viewBox,d;if(h){var y=Et(h),g=At(y,4),w=g[0],_=g[1],O=g[2],M=g[3];d=vt(a,u,w,_,O,M,c,l)}else{var T=s.props,V=T.width,x=T.height;d=vt(a,u,0,0,V,x,c,l)}return o=t.call(this,r,i),o.ViewerDOM=null,o.state={pointerX:null,pointerY:null,defaultValue:d},o.autoPanLoop=o.autoPanLoop.bind(Qe(o)),o.onWheel=o.onWheel.bind(Qe(o)),o}return Ki(n,[{key:"componentDidUpdate",value:function(i){var o=this.getValue(),a=this.props,u=o,c=!1,l=a.children.props.viewBox;if(l){var s=Et(l),h=At(s,4),d=h[0],y=h[1],g=h[2],w=h[3];(o.SVGMinX!==d||o.SVGMinY!==y||o.SVGWidth!==g||o.SVGHeight!==w)&&(u=mt(u,d,y,g,w),c=!0)}else{var _=a.children.props,O=_.width,M=_.height;(o.SVGWidth!==O||o.SVGHeight!==M)&&(u=mt(u,0,0,O,M),c=!0)}(i.width!==a.width||i.height!==a.height)&&(u=gr(u,a.width,a.height),c=!0),(i.scaleFactorMin!==a.scaleFactorMin||i.scaleFactorMax!==a.scaleFactorMax)&&(u=xr(u,a.scaleFactorMin,a.scaleFactorMax),c=!0),c&&this.setValue(u)}},{key:"componentDidMount",value:function(){this.autoPanIsRunning=!0,requestAnimationFrame(this.autoPanLoop),this.ViewerDOM.addEventListener("wheel",this.onWheel,!1)}},{key:"componentWillUnmount",value:function(){this.autoPanIsRunning=!1,this.ViewerDOM.removeEventListener("wheel",this.onWheel)}},{key:"getValue",value:function(){return pr(this.props.value)?this.props.value:this.state.defaultValue}},{key:"getTool",value:function(){return this.props.tool?this.props.tool:U}},{key:"setValue",value:function(i){var o=this.props,a=o.onChangeValue,u=o.onZoom,c=o.onPan;a&&a(i),i.lastAction&&(u&&i.lastAction===De&&u(i),c&&i.lastAction===ye&&c(i))}},{key:"pan",value:function(i,o){var a=ut(this.getValue(),i,o);this.setValue(a)}},{key:"zoom",value:function(i,o,a){var u=he(this.getValue(),i,o,a);this.setValue(u)}},{key:"fitSelection",value:function(i,o,a,u){var c=nn(this.getValue(),i,o,a,u);this.setValue(c)}},{key:"fitToViewer",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ce,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:le,a=rn(this.getValue(),i,o);this.setValue(a)}},{key:"zoomOnViewerCenter",value:function(i){var o=Rr(this.getValue(),i);this.setValue(o)}},{key:"setPointOnViewerCenter",value:function(i,o,a){var u=vr(this.getValue(),i,o,a);this.setValue(u)}},{key:"reset",value:function(){var i=mr(this.getValue());this.setValue(i)}},{key:"openMiniature",value:function(){var i=fn(this.getValue());this.setValue(i)}},{key:"closeMiniature",value:function(){var i=hn(this.getValue());this.setValue(i)}},{key:"handleViewerEvent",value:function(i){var o=this.props,a=this.ViewerDOM;if([U,j].indexOf(this.getTool())>=0&&i.target!==a){var u={click:o.onClick,dblclick:o.onDoubleClick,mousemove:o.onMouseMove,mouseup:o.onMouseUp,mousedown:o.onMouseDown,touchstart:o.onTouchStart,touchmove:o.onTouchMove,touchend:o.onTouchEnd,touchcancel:o.onTouchCancel},c=u[i.type];!c||c(ri(i,o.value,a))}}},{key:"autoPanLoop",value:function(){var i={x:this.state.pointerX,y:this.state.pointerY},o=Ir(null,this.ViewerDOM,this.getTool(),this.getValue(),this.props,i);this.getValue()!==o&&this.setValue(o),this.autoPanIsRunning&&requestAnimationFrame(this.autoPanLoop)}},{key:"onWheel",value:function(i){var o=Ar(i,this.ViewerDOM,this.getTool(),this.getValue(),this.props);this.getValue()!==o&&this.setValue(o)}},{key:"render",value:function(){var i=this,o=this.props,a=this.state,u=a.pointerX,c=a.pointerY,l=this.getTool(),s=this.getValue(),h=o.customToolbar,d=h===void 0?lt:h,y=o.customMiniature,g=y===void 0?ft:y,w=l===j&&s.mode===G&&s.startX!==s.endX&&s.startY!==s.endY,_;l===L&&(_=ve(s.mode===G?"grabbing":"grab")),l===q&&(_=ve("zoom-in")),l===Z&&(_=ve("zoom-out")),w&&(_=ve("grabbing"));var O=[L,q,Z].indexOf(l)>=0;O=O||w;var M=this.props.detectPinchGesture||[L,j].indexOf(this.getTool())!==-1?"none":void 0,T={display:"block",cursor:_,touchAction:M};return p.createElement("div",{style:Wi({position:"relative",width:s.viewerWidth,height:s.viewerHeight},o.style),className:this.props.className},p.createElement("svg",{ref:function(x){return i.ViewerDOM=x},width:s.viewerWidth,height:s.viewerHeight,style:T,onMouseDown:function(x){var m=on(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props);i.getValue()!==m&&i.setValue(m),i.handleViewerEvent(x)},onMouseMove:function(x){var m=i.ViewerDOM.getBoundingClientRect(),K=m.left,J=m.top,$=x.clientX-Math.round(K),R=x.clientY-Math.round(J),X=an(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props,{x:$,y:R});i.getValue()!==X&&i.setValue(X),i.setState({pointerX:$,pointerY:R}),i.handleViewerEvent(x)},onMouseUp:function(x){var m=un(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props);i.getValue()!==m&&i.setValue(m),i.handleViewerEvent(x)},onClick:function(x){i.handleViewerEvent(x)},onDoubleClick:function(x){var m=Gr(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props);i.getValue()!==m&&i.setValue(m),i.handleViewerEvent(x)},onMouseEnter:function(x){if(!ji()){var m=_t(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props);i.getValue()!==m&&i.setValue(m)}},onMouseLeave:function(x){var m=_t(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props);i.getValue()!==m&&i.setValue(m)},onTouchStart:function(x){var m=ai(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props);i.getValue()!==m&&i.setValue(m),i.handleViewerEvent(x)},onTouchMove:function(x){var m=ui(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props);i.getValue()!==m&&i.setValue(m),i.handleViewerEvent(x)},onTouchEnd:function(x){var m=si(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props);i.getValue()!==m&&i.setValue(m),i.handleViewerEvent(x)},onTouchCancel:function(x){var m=ci(x,i.ViewerDOM,i.getTool(),i.getValue(),i.props);i.getValue()!==m&&i.setValue(m),i.handleViewerEvent(x)}},p.createElement("rect",{fill:o.background,x:0,y:0,width:s.viewerWidth,height:s.viewerHeight,style:{pointerEvents:"none"}}),p.createElement("g",{transform:lr(s),style:O?{pointerEvents:"none"}:{}},p.createElement("rect",{fill:this.props.SVGBackground,style:this.props.SVGStyle,x:s.SVGMinX||0,y:s.SVGMinY||0,width:s.SVGWidth,height:s.SVGHeight}),p.createElement("g",null,o.children.props.children)),[U,j].indexOf(l)>=0&&o.detectAutoPan&&s.focus?p.createElement("g",{style:{pointerEvents:"none"}},c<=20?p.createElement(me,{direction:I,width:s.viewerWidth,height:s.viewerHeight}):null,s.viewerWidth-u<=20?p.createElement(me,{direction:D,width:s.viewerWidth,height:s.viewerHeight}):null,s.viewerHeight-c<=20?p.createElement(me,{direction:B,width:s.viewerWidth,height:s.viewerHeight}):null,s.focus&&u<=20?p.createElement(me,{direction:E,width:s.viewerWidth,height:s.viewerHeight}):null):null,s.mode!==A?null:p.createElement(gn,{startX:s.startX,startY:s.startY,endX:s.endX,endY:s.endY})),o.toolbarProps.position===be?null:p.createElement(d,Me({},this.props.toolbarProps,{value:s,onChangeValue:function(x){return i.setValue(x)},tool:l,onChangeTool:function(x){return i.props.onChangeTool(x)}})),o.miniatureProps.position===be?null:p.createElement(g,Me({},this.props.miniatureProps,{value:s,onChangeValue:function(x){return i.setValue(x)},SVGBackground:this.props.SVGBackground}),o.children.props.children))}}]),n}(p.Component);ht.propTypes={width:f.exports.number.isRequired,height:f.exports.number.isRequired,value:f.exports.oneOfType([f.exports.object,f.exports.shape({version:f.exports.oneOf([2]).isRequired,mode:f.exports.oneOf([k,G,A]).isRequired,focus:f.exports.bool.isRequired,a:f.exports.number.isRequired,b:f.exports.number.isRequired,c:f.exports.number.isRequired,d:f.exports.number.isRequired,e:f.exports.number.isRequired,f:f.exports.number.isRequired,viewerWidth:f.exports.number.isRequired,viewerHeight:f.exports.number.isRequired,SVGMinX:f.exports.number.isRequired,SVGMinY:f.exports.number.isRequired,SVGWidth:f.exports.number.isRequired,SVGHeight:f.exports.number.isRequired,startX:f.exports.number,startY:f.exports.number,endX:f.exports.number,endY:f.exports.number,miniatureOpen:f.exports.bool.isRequired})]).isRequired,onChangeValue:f.exports.func.isRequired,tool:f.exports.oneOf([j,U,L,q,Z]).isRequired,onChangeTool:f.exports.func.isRequired,background:f.exports.string,SVGBackground:f.exports.string,SVGStyle:f.exports.object,style:f.exports.object,className:f.exports.string,detectWheel:f.exports.bool,detectAutoPan:f.exports.bool,detectPinchGesture:f.exports.bool,onZoom:f.exports.func,onPan:f.exports.func,onClick:f.exports.func,onDoubleClick:f.exports.func,onMouseUp:f.exports.func,onMouseMove:f.exports.func,onMouseDown:f.exports.func,preventPanOutside:f.exports.bool,scaleFactor:f.exports.number,scaleFactorOnWheel:f.exports.number,scaleFactorMax:f.exports.number,scaleFactorMin:f.exports.number,modifierKeys:f.exports.array,disableDoubleClickZoomWithToolAuto:f.exports.bool,customMiniature:f.exports.oneOfType([f.exports.element,f.exports.func]),miniatureProps:f.exports.shape({position:f.exports.oneOf([be,D,E]),background:f.exports.string,width:f.exports.number,height:f.exports.number}),customToolbar:f.exports.oneOfType([f.exports.element,f.exports.func]),toolbarProps:f.exports.shape({position:f.exports.oneOf([be,I,D,B,E]),SVGAlignX:f.exports.oneOf([se,ce,ot]),SVGAlignY:f.exports.oneOf([se,le,at]),activeToolColor:f.exports.string}),children:function(t,n,r){var i=t[n],o=["svg"];if(p.Children.count(i)!==1||o.indexOf(i.type)===-1)return new Error("`"+r+"` should have a single child of the following types:  `"+o.join("`, `")+"`.");if((!i.props.hasOwnProperty("width")||!i.props.hasOwnProperty("height"))&&!i.props.hasOwnProperty("viewBox"))return new Error("SVG should have props `width` and `height` or `viewBox`")}};ht.defaultProps={style:{},background:"#616264",SVGBackground:"#fff",SVGStyle:{},detectWheel:!0,detectAutoPan:!0,detectPinchGesture:!0,modifierKeys:["Alt","Shift","Control"],preventPanOutside:!0,scaleFactor:1.1,scaleFactorOnWheel:1.06,disableZoomWithToolAuto:!1,onZoom:null,onPan:null,toolbarProps:{},miniatureProps:{}};function et(e){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(e)}var no=["width","height","onChangeTool","onChangeValue"];function tt(){return tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tt.apply(this,arguments)}function ro(e,t){if(e==null)return{};var n=io(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function io(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e,t,n){return t&&Lt(e.prototype,t),n&&Lt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}function nt(e,t){return nt=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},nt(e,t)}function so(e){var t=lo();return function(){var r=Ee(e),i;if(t){var o=Ee(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return co(this,i)}}function co(e,t){if(t&&(et(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rt(e)}function rt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ee(e)}var wn=function(e){uo(n,e);var t=so(n);function n(r){var i;return oo(this,n),i=t.call(this,r),i.state={value:r.defaultValue||{},tool:r.defaultTool||U},i.Viewer=null,i.changeTool=i.changeTool.bind(rt(i)),i.changeValue=i.changeValue.bind(rt(i)),i}return ao(n,[{key:"changeTool",value:function(i){this.setState({tool:i})}},{key:"changeValue",value:function(i){this.setState({value:i})}},{key:"pan",value:function(i,o){this.Viewer.pan(i,o)}},{key:"zoom",value:function(i,o,a){this.Viewer.zoom(i,o,a)}},{key:"fitSelection",value:function(i,o,a,u){this.Viewer.fitSelection(i,o,a,u)}},{key:"fitToViewer",value:function(i,o){this.Viewer.fitToViewer(i,o)}},{key:"zoomOnViewerCenter",value:function(i){this.Viewer.zoomOnViewerCenter(i)}},{key:"setPointOnViewerCenter",value:function(i,o,a){this.Viewer.setPointOnViewerCenter(i,o,a)}},{key:"reset",value:function(){this.Viewer.reset()}},{key:"openMiniature",value:function(){this.Viewer.openMiniature()}},{key:"closeMiniature",value:function(){this.Viewer.closeMiniature()}},{key:"render",value:function(){var i=this,o=this.props,a=o.width,u=o.height;o.onChangeTool,o.onChangeValue;var c=ro(o,no),l=this.state,s=l.tool,h=l.value;return p.createElement(ht,tt({width:a,height:u,tool:s,onChangeTool:this.changeTool,value:h,onChangeValue:this.changeValue,ref:function(y){return i.Viewer=y}},c))}}]),n}(p.Component);wn.propTypes={width:f.exports.number.isRequired,height:f.exports.number.isRequired,defaultValue:f.exports.object,defaultTool:f.exports.string};var fo=function(){},bn=typeof window<"u",ho=bn?S.exports.useLayoutEffect:S.exports.useEffect;const po=ho;var On={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function yo(){var e=S.exports.useState(null),t=e[0],n=e[1],r=S.exports.useState(On),i=r[0],o=r[1],a=S.exports.useMemo(function(){return new window.ResizeObserver(function(u){if(u[0]){var c=u[0].contentRect,l=c.x,s=c.y,h=c.width,d=c.height,y=c.top,g=c.left,w=c.bottom,_=c.right;o({x:l,y:s,width:h,height:d,top:y,left:g,bottom:w,right:_})}})},[]);return po(function(){if(!!t)return a.observe(t),function(){a.disconnect()}},[t]),[n,i]}const go=bn&&typeof window.ResizeObserver<"u"?yo:function(){return[fo,On]},xo=te("div",{height:"calc(100vh - $4 - $4)",overflowY:"scroll",width:"calc(100%/3)"}),vo=te("div",{width:"100%",height:"calc(100vh - $4 - $4)"}),mo=te("table",{padding:"$2"}),wo=te("div",{width:"calc(100%/3*2)"}),bo=te("tr",{cursor:"pointer",fontFamily:"monospace"},{"&:hover":{color:"red"}}),Oo=te("div",{display:"flex"}),Vo=e=>{const[t,n,r]=Fe(e.entry.tileId);return z(bo,{onClick:()=>{e.setSelectedEntry(e.entry)},children:[v("td",{children:e.entry.tileId}),v("td",{children:t}),v("td",{children:n}),v("td",{children:r}),v("td",{children:e.entry.offset}),v("td",{children:e.entry.length}),v("td",{children:e.entry.runLength===0?"directory":`tile(${e.entry.runLength})`})]})},_o=(e,t)=>e.name==="earth"?-4:e.name==="water"?-3:e.name==="natural"?-2:e.name==="landuse"?-1:e.name==="places"?1:0,Po=e=>{const[t,n]=S.exports.useState(!1);let r="none",i="";e.feature.type===3?r=t?"white":"currentColor":i=t?"white":"currentColor";const o=()=>{n(!0)},a=()=>{n(!1)},u=()=>{e.setSelectedFeature(e.feature)};return v("path",{d:e.feature.path,stroke:i,strokeWidth:10,fill:r,fillOpacity:.5,onMouseOver:o,onMouseOut:a,onMouseDown:u})},So=e=>{const t=e.layer.features.map((n,r)=>v(Po,{feature:n,setSelectedFeature:e.setSelectedFeature},r));return v("g",{color:e.color,children:t})},Mo=te("div",{position:"absolute",right:0,bottom:0,backgroundColor:"$black",padding:"$1"}),To=e=>{const t=[];for(const r in e.feature.properties)t.push([r,e.feature.properties[r]]);const n=t.map((r,i)=>z("tr",{children:[v("td",{children:r[0]}),v("td",{children:typeof r[1]=="boolean"?JSON.stringify(r[1]):r[1]})]},i));return z(Mo,{children:[e.feature.layerName,v("table",{children:v("tbody",{children:n})})]})},Eo=e=>{const[t,n]=S.exports.useState([]),[r,i]=S.exports.useState(0),[o,a]=S.exports.useState(null),u=S.exports.useRef(null),[c,{width:l,height:s}]=go();S.exports.useEffect(()=>{var d;(d=u.current)==null||d.zoomOnViewerCenter(.1)},[]),S.exports.useEffect(()=>{const d=async y=>{const[g,w,_]=Fe(y.tileId),O=await e.file.getZxy(g,w,_),M=new Wn(new Nn(new Uint8Array(O.data))),T=[];let V=0;for(const[x,m]of Object.entries(M.layers)){m.extent>V&&(V=m.extent);const K=[];for(let J=0;J<m.length;J++){const $=m.feature(J),R=Wt(),X=$.loadGeometry();if($.type===1)for(const Y of X)for(const W of Y)R.arc(W.x,W.y,20,0,2*Math.PI);else for(const Y of X){R.moveTo(Y[0].x,Y[0].y);for(let W=1;W<Y.length;W++)R.lineTo(Y[W].x,Y[W].y);$.type===3&&R.closePath()}K.push({path:R.toString(),type:$.type,id:$.id,properties:$.properties,layerName:x})}T.push({features:K,name:x})}i(V),T.sort(_o),n(T)};e.entry&&d(e.entry)},[e.entry]);const h=t.map((d,y)=>v(So,{layer:d,color:_n[y%12],setSelectedFeature:a},y));return z(vo,{ref:c,children:[v(wn,{ref:u,width:l,height:s,detectAutoPan:!1,onClick:d=>console.log("click",d.x,d.y,d.originalEvent),children:v("svg",{viewBox:"0 0 4096 4096",children:h})}),o?v(To,{feature:o}):null]})},Fo=e=>{const[t,n]=S.exports.useState("");return S.exports.useEffect(()=>{const r=async i=>{const[o,a,u]=Fe(i.tileId),c=await e.file.getZxy(o,a,u),l=new Blob([c.data]),s=window.URL.createObjectURL(l);n(s)};e.entry&&r(e.entry)},[e.entry]),v("img",{src:t,alt:"raster tile"})};function ko(e){const[t,n,r]=Fe(e.tileId),i=`${t}/${n}/${r}`,o="inspector";let a=!1;const u=window.location.hash.slice(1).split("&").map(c=>{const l=c.split("=")[0];return l===o?(a=!0,`${l}=${i}`):c}).filter(c=>c);return a||u.push(`${o}=${i}`),`#${u.join("&")}`}function Do(e){const[t,n]=S.exports.useState([]),[r,i]=S.exports.useState(null),[o,a]=S.exports.useState(null);function u(h){h&&h.runLength>0&&window.history.replaceState(window.history.state,"",ko(h)),i(h)}S.exports.useEffect(()=>{(async()=>{const d=await e.file.getHeader();if(a(d),d.specVersion<3)n([]);else if(r!==null&&r.runLength===0){const y=await e.file.cache.getDirectory(e.file.source,d.leafDirectoryOffset+r.offset,r.length,d);n(y)}else if(r===null){const y=await e.file.cache.getDirectory(e.file.source,d.rootDirectoryOffset,d.rootDirectoryLength,d);n(y)}})()},[e.file,r]);const c=t.map((h,d)=>v(Vo,{entry:h,setSelectedEntry:u},d));let l=v("div",{});r&&(o==null?void 0:o.tileType)&&(r.runLength===0||(o.tileType===Vn.Mvt?l=v(Eo,{file:e.file,entry:r,tileType:o.tileType}):l=v(Fo,{file:e.file,entry:r})));let s="";return o&&o.specVersion<3&&(s="Directory listing supported only for PMTiles v3 archives."),z(Oo,{children:[z(xo,{children:[s,z(mo,{children:[v("thead",{children:z("tr",{children:[v("th",{children:"tileid"}),v("th",{children:"z"}),v("th",{children:"x"}),v("th",{children:"y"}),v("th",{children:"offset"}),v("th",{children:"length"}),v("th",{children:"type"})]})}),v("tbody",{children:c})]})]}),v(wo,{children:l})]})}function Ro(){Pn();const[e,t]=S.exports.useState();return S.exports.useEffect(()=>{const n=new URLSearchParams(location.search).get("url");if(n){const r=new Sn(n);t(r)}},[]),S.exports.useEffect(()=>{const n=new URL(window.location.href);e!=null&&e.source.getKey().startsWith("http")?(n.searchParams.set("url",e.source.getKey()),history.pushState(null,"",n.toString())):(n.searchParams.delete("url"),history.pushState(null,"",n.toString()))},[e]),v("div",{children:e?v(Do,{file:e}):v(Mn,{setFile:t})})}const Xt=document.getElementById("root");Xt&&Tn.createRoot(Xt).render(v(p.StrictMode,{children:v(Ro,{})}));
